(ns haincanter)
(ns hoincanter)
(use '(incanter core io))
(def ds (read-dataset  "TIME_MONITOR_2013-12-18.csv" :header true) )
view ds
(def ds (read-dataset  "TIME_MONITOR_2013-12-18.csv" :header true :delim ';') )
(def ds (read-dataset  "TIME_MONITOR_2013-12-18.csv" :header true :delim ';) )
(def ds (read-dataset  "TIME_MONITOR_2013-12-18.csv" :header true :delim \;) )
view ds
(nrow ds)
(view ($ q
(use '(incanter core io))
(def ds (read-dataset  "TIME_MONITOR_2013-12-18.csv" :header true :delim \;) )
(view ds)
(nrow ds)
(mean ds)
(view ($ :duration ds))
(def ds (read-dataset  "TIME_MONITOR_2013-12-18.csv" :header true :delim \;) )
(view ($ :duration ds))
(def ds2 (read-dataset  "TIME_MONITOR_2013-12-18.csv" :header true :delim \;) )
(view ds2)
(view ($ :duration ds2))
(mean ($ :duration ds2)
)
(sd ($ :duration ds2)
)
(ns hoincanter)
(mean ($ :duration ds2))
(view (time-series-plot :time :duration :data ds2))
(view ds2)
(use '(incanter core io))
(view ds2)
(def ds (read-dataset  "TIME_MONITOR_2013-12-18.csv" :header true :delim \;) )
(view ds)
(mean ($ :duration ds))
($ :duration ds)
(count ($ :duration ds)Ã )
(count ($ :duration ds))
(mean ($ :duration ds))
(sd ($ :duration ds))
(use '(incanter core io stats))
(mean ($ :duration ds))
(sd ($ :duration ds))
(sum ($ :duration ds))
(view ($where {:duration {:$ne ni} } ds))
(view ($where {:duration {:$ne 'nil'} } ds))
(use '(incanter core io stats)
)
(def ds (read-dataset  "TIME_MONITOR_2013-12-18.csv" :header true :delim \;) )
(view ds)
(view ($ :duration ds))
(mean ($ :duration ds))
(summary ($ :duration ds))
(summary ds)
(def ds20 (read-dataset  "TIME_MONITOR_2013-12-20.csv" :header true :delim \;) )
(summary ds20)
(quantile ($ :duration ds) :probs[0])
(view  ($where {:s "RS_OW_City"} ds20))
(view  ($where {:servicename "RS_OW_City"} ds20))
(def ds20ADS  ($where {:servicename "RS_OW_City"} ds20)))
(def ds20ADS  ($where {:servicename "RS_OW_City"} ds20))
(time-series-plot :time :duration :data ds20ADS)
(use '(incanter core io stats charts)
)
(time-series-plot :time :duration :data ds20ADS)
(histogram  :duration :data ds20ADS)
(view (histogram  :duration :data ds20ADS))
(view (histogram  :duration :data ds20))
(view (bar-chart :servicename :duration :vertical false :data  ($rollup count :duration :servicename ds20)))
(def ds20nonADS  ($where {:not {:servicename "RS_OW_City"}} ds20))
(view ds20nonADS)
(def ds20nonADS  ($where {:ne :servicename "RS_OW_City"} ds20))
(view ds20nonADS)
(def ds20nonADS  ($where {:servicename {:ne "RS_OW_City"}} ds20))
(view ds20nonADS)
(def ds20nonADS  ($where {:servicename {:ne "RS_OW_AgencyDataSupplierService"}} ds20))
(view ds20nonADS)
(view (bar-chart :servicename :duration :vertical false :data  ($rollup count :duration :servicename ds20nonADS)))
(def ds20long  ($where {:duration {:gt 40}} ds20))
(view (bar-chart :servicename :duration :vertical false :data  ($rollup count :duration :servicename ds20long)))
(view ds20nonADS)
(use '(incanter core io stats charts))
(use '(incanter core io stats chart))
(use '(incanter core io stats charts))
(with-data ds 
(mean %data)(sd %data))
(mean $data)(sd $data))
(with-data ($ :duration ds)
(mean $data)(sd $data))
(mean $data) (sd $data))
(with-data ($ :duration ds)
(mean $data) (sd $data))
(with-data ($ :duration ds)
(print (mean $data))  (print (sd $data)))
(with-data ($ :duration ds)
[ (mean $data))  (print (sd $data)])
(with-data ($ :duration ds)
[ (mean $data) (sd $data) ] )
(with-data ($ :duration ds)
[ (count $data) (mean $data) (sd $data) ] )
(defn q [p serie] (quantile serie :probs [p])) 
(q 0 ($ :duration ds))
(keys ($groups-by ds))
(keys ($groupsby ds))
(keys ($groupby ds))
(keys ($group-by ds))
($group-by ds)
ds
($group-by :servicename  ds)
(keys ($group-by :servicename  ds))
(keys ($group-by :servicename  ds20))
(view (pie-chart :duration :data ds20))
(view (pie-chart :servicename :duration :data ds20))
(view (bar-chart :servicename :duration :data ds20))
(view (bar-chart :duration :servicename :data ds20))
(view (pie-chart :servicename :duration :data ds20))
(view (historgram  :duration :data ds20))
(view (histogram  :duration :data ds20))
($rollup count :duration :servicename ds20)
(type ($rollup count :duration :servicename ds20))
($group-by :servicename ds20))
($group-by :servicename ds20)
($group-by dslong)
($group-by :servicename dslong)
(def dslong  ($where {:duration {:gt 40}} ds20)
)
($group-by :servicename dslong)
(mean  ($where {:servicename "RS_OW_City"} dslon))
(mean  ($where {:servicename "RS_OW_City"} dslong))
(mean :duration  ($where {:servicename "RS_OW_City"} dslong))
(mean ($ :duration  ($where {:servicename "RS_OW_City"} dslong)))
 ($ :duration  ($where {:servicename "RS_OW_City"} dslong))
(mean  ($ :duration  ($where {:servicename "RS_OW_City"} dslong)))
(count  ($ :duration  ($where {:servicename "RS_OW_City"} dslong)))
(mean (toSet ($ :duration  ($where {:servicename "RS_OW_City"} dslong))))
(mean (toList ($ :duration  ($where {:servicename "RS_OW_City"} dslong))))
(count  ($ :duration  ($where {:servicename "RS_OW_City"} dslong)))
(mean  ($ :duration  ($where {:servicename "RS_OW_City"} dslong)))
(count  ($ :duration  ($where {:servicename "RS_OW_AgencyDataSupplierService"} dslong)))
(mean  ($ :duration  ($where {:servicename "RS_OW_AgencyDataSupplierService"} dslong)))
($group-by :servicename dslong)
(get "RS_OW_AgencyDataSupplierService"  ($group-by :servicename dslong))
(key "RS_OW_AgencyDataSupplierService"  ($group-by :servicename dslong))
(get ($group-by :servicename dslong) "RS_OW_AgencyDataSupplierService ")
(get ($group-by :servicename dslong) "RS_OW_AgencyDataSupplierService")
(find ($group-by :servicename dslong) "RS_OW_AgencyDataSupplierService")
(find ($group-by :servicename dslong) :RS_OW_AgencyDataSupplierService)
(find ($group-by :servicename dslong) 'RS_OW_AgencyDataSupplierService')
(find ($group-by :servicename dslong22) 'RS_OW_AgencyDataSupplierService')
(find ($group-by :servicename dslong) 'RS_OW_AgencyDataSupplierService')
 ($group-by :servicename dslong) 
(get  ($group-by :servicename dslong {:servicename "RS_OW_AgencyDataSupplierService"} ) 
)
(get  ($group-by :servicename dslong) {:servicename "RS_OW_AgencyDataSupplierService"} ) 
(view (pie-chart :servicename :duration :vertical false :data  ($rollup count :duration :servicename dslong)))
(use 'midje.repl)
(autotest)
(autotest
(use 'midje.repl'
)
(use 'midje.repl)
(autotest)
(use 'midje.repl)
(autotest)
(use 'midje.repl)
(autotest)
(q 0 [1 2 3])
(ns hoincanter)
(q 0 [1 2 3])
(use 'midje.repl)
(autotest)
(use 'hoincanter.core)
(q 0 [ 1 2 3 ])
